<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Crash Points Map with Monthly Statistics</title>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.css" rel="stylesheet"/>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/analysis.css') }}">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        #map {
            width: 100%;
            height: 100vh;
        }
    </style>

</head>
<body>
    <div class="tabs">
        <a href="{{ url_for('index') }}" class="button">홈으로</a>
    </div>
    <div id="layout">
        <div class="left-panel">
            <div id="map"></div>
            <div id="timestamp-display"></div> 
            <div id="controls">
                <button id="play-pause">⏸️</button>
                <div id="slider-container">
                    <input id="slider" type="range" min="0" max="83">
                    <div id="marker"></div>
                </div>
                <button id="go-to-accident">사고 시간으로 이동</button>
            </div>
        </div>
        <div class="right-panel">
            <div id="graph-container"></div> <!-- 그래프 렌더링 -->
            <div>
                <label for="range-selector">범위 선택 (1~15km):</label>
                <select id="range-selector">
                    <!-- 옵션 설정 -->
                    <option value="1">1 km</option>
                    <option value="3" selected>3 km</option>
                    <option value="5">5 km</option>
                    <option value="7">7 km</option>
                    <option value="9">9 km</option>
                    <option value="11">11 km</option>
                    <option value="13">13km</option>
                    <option value="15">15 km</option>
                    <option value="35">35 km</option>
                </select>
                <button id="update-button">업데이트</button>
            </div>
            <div id="text-container"></div>  <!-- 평균 속도 차이 텍스트 -->
        </div>
    </div>

    <script>
        // 서버에서 전달된 데이터를 JavaScript에서 활용
        const processedData = {
            drNumber: "{{ dr_number }}",
            nanoseconds: "{{ nanoseconds }}",
            lat :"{{ latitude }}",
            lon : "{{ longitude }}"
        };

        console.log('Processed Data:', processedData);
        window.selectedRange = 3;

        // JavaScript에서 데이터 활용
        // 예: 데이터 렌더링, 추가 작업 수행
    </script>
     <!-- Leaflet JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/analysis.js') }}"></script>
    <script src="{{ url_for('static', filename='js/analysis2.js') }}"></script>

   
</body>
</html>