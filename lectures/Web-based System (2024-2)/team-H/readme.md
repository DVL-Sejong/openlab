
---

# **EEG Data System**

EEG 데이터를 업로드하고 전처리, 분석 및 예측할 수 있는 시스템입니다.

프로젝트의 요구사항은 다음과 같습니다.
- 뇌파를 포함한 멀티모달 데이터셋을 활용하여 뇌파 전처리 지원, 모델 결과를 제공하는 VA 개발
- EEG 데이터 사용자가 다양한 전처리 방법을 효과적으로 비교하고, 최적의 전처리를 사용할 수 있도록 지원
- 사용한 전처리 방법과 모델에 따른 결과를 제공하고 최적의 전처리 방법 & 모델의 조합을 찾을 수 있도록 지원할 것

요구사항에 따른 구현사항
1. 사용자가 원하는 전처리 과정을 직접 선택 가능하게 하여 다양한 전처리를 직접 선택 가능하게 구현하였습니다.
2. 전처리 후 데이터는 뇌의 구역별로 그래프를 통해 시각화 하였으며, 그래프의 확대, 축소, 원하는 대역만 표시 등의 기능을 통해
  사용자의 데이터 해석을 도울 수 있도록 구현하였습니다.
3. 각 사용자가 원하는 전처리 기법을 저장하고, 사용자의 데이터를 예측한 결과를 리스트로 구성하여 각 모델 별 결과를 비교 가능하도록 구현하였습니다.
4. XAI로는 각 모델의 예측 결과에 따른 부위, 대역 별 중요도를 판단 가능합니다.
 이에 사용자가 모델의 중요도를 보고 어느 데이터에 집중하여야 하는지를 돕습니다.


평가 기준에 따른 구현사항
1. 구현된 EEG 데이터 전처리 기법의 다양성
   전처리는 NaN값 제거, highpass filter, 라인노이즈 제거, artifact 제거, 평균 재참조, Min-Max 정규화, FFT 중
   NaN값 제거, 라인 노이즈 제거를 필수 전처리로 지정하고 나머지 FFT 미사용 전처리에서의 경우의 수 16가지, 
   FFT 사용 전처리에서의 경우의 수 16가지로, 총 32가지의 전처리를 지원합니다.

2. 사용된 EEG 모델의 다양성
   EEG모델은 제공된 기존 이진분류 CNN 모델에서 3가지의 다중분류 CNN 모델로 수정하였으며,
   FFT 미사용 시와 사용 시의 모델 각각 2가지가 존재합니다.
   
3. 결과 분석의 깊이와 통찰력
   결과 분석시에는 원하는 전처리 과정을 저장하여 리스트로 나열하여 각 전처리 별 결과를 쉽게 비교 가능하도록 구현하였습니다.
   각 분석 결과에는 각 모델이 예측한 값, 정확도, 각 결과의 확률을 표시하여 해당 분석 결과의 신뢰성을 표시하였습니다.
   데이터 시각화는 전처리 전 후 그래프를 함께 배치하여 전처리의 전후 결과를 한눈에 비교 가능하도록 구현하였습니다.
   FFT 사용 전처리의 경우에는 원하는 대역만 그래프에 표시 가능하도록 구현하여 각 대역 별 변화를 비교할 수 있습니다.
   지정된 부위의 전처리에서는 해당 그래프에 마우스를 올릴 시 정보를 표시하여 해당 구간의 정보를 표시하였고,
   그래프를 마우스 스크롤하거나 원하는 부분을 드래그하여 확대 가능하도록 구현하여, 그래프 해석에 도움을 줄 수 있도록 하였습니다.
   또한 FFT 사용 전처리의 부위별 전처리 결과에서는 기존 기능에 더하여 우측의 대역에 마우스를 올릴 시 해당 대역만 표시하도록 구현하였습니다.
   마지막으로, 각 전처리 경우의 수에 따른 모델의 Accuracy table을 제시하여 해당 모델의 신뢰도를 알 수 있도록 하였고,
   SHAP와 captum을 통한 분석으로 모델의 예측 결과에 따른 중요한 부위, 구역을 표시하였습니다. 

4. 시각화 시스템의 직관성
   시스템의 직관성을 위해서 모델의 예측 결과에 따른 아이콘을 사용하였고, 앞서 작성한 그래프, XAI 모델을 이용한 해석을 제공하기에
   충분한 직관성을 지닌다고 생각합니다.

5. 프로젝트 결과물의 실용성
   이 프로젝트는 기존 파일들 뿐만 아니라 사용자가 eeg 파일을 올려 사용 가능하기에 원하는 데이터에 대한 결과를 얻을 수 있습니다.
   또한 전처리 전후 데이터를 시각적으로 표시하고, 모델의 예측에 대한 구역, 대역 별 중요도를 XAI를 통해 나타내
   사용자의 데이터 분석에 도움을 줄 수 있기에 형식에 맞는 데이터만 존재한다면 실제로 사용 가능할 정도로 실용적인 프로젝트라고 생각합니다.
---

## **실행 방법**

### **1. 가상환경 설정 및 활성화**
프로젝트 폴더로 이동 후 가상환경을 설정하고 활성화합니다.

- **Mac/Linux**:
   ```bash
   cd eeg-data-system
   python3 -m venv venv
   source ./venv/bin/activate
   ```

- **Windows**:
   ```bash
   cd eeg-data-system
   python -m venv venv
   .\venv\Scripts\activate
   ```

---

### **2. 패키지 설치**
프로젝트의 의존 패키지를 설치합니다.

```bash
pip install -r requirements.txt
```

---

### **3. 서버 실행**
다음 명령어로 서버를 실행합니다.

```bash
python app.py
```

터미널에 아래 메시지가 나타나면 성공입니다:

```
Running on http://127.0.0.1:5000
```

브라우저에서 **http://127.0.0.1:5000** 주소로 접속합니다.

---

## **웹페이지 사용 방법**

### **1. EEG 데이터 업로드**
- **기능**: EEG 데이터를 업로드할 수 있습니다.  
- **추가**: 기본으로 제공되는 EEG 데이터 목록을 확인할 수 있습니다.

---

### **2. EEG 데이터 분석**
1. **설정 저장**  
   - 설정 이름을 입력하고 원하는 전처리 방법을 선택한 후 **저장** 버튼을 클릭합니다.

2. **데이터 예측**  
   - EEG 데이터 파일과 저장된 설정을 선택하고 **예측** 버튼을 클릭합니다.  
   - 오른쪽 화면에 **시각화** 및 **모델 결과**가 표시됩니다.

3. **시각화 결과 보기**  
   - **시각화 버튼**을 클릭하면 새로운 페이지에서 결과를 확인할 수 있습니다.
   - 모든 채널 시각화를 클릭하면 모든 구역에서의 뇌파 전처리 전후 데이터를 확인 가능합니다.
      - fft 전처리를 시행한 경우 체크박스를 통해 원하는 대역만 표시 가능합니다.
   - 각 구역 별 전처리 결과를 클릭 시 양 쪽 그래프 모두 스크롤을 통해 확대/축소가 가능하며,
      그래프의 원하는 부분을 클릭 후 드래그 시 해당 구역만큼의 그래프가 확대됩니다.
---

### **3. 정확도 테이블**
- 모델 성능에 대한 정확도 결과를 테이블 형식으로 확인할 수 있습니다.

---

### **4. 설명 가능한 AI (XAI)**
- 모델 예측 결과를 설명하는 시각화 도구를 제공합니다.

---

## **프로젝트 구조**
```
eeg-data-system/
│
├── app.py                   # 서버 실행 메인 파일
├── requirements.txt         # 패키지 의존성 파일
├── templates/               # HTML 파일
├── static/                  # CSS, JavaScript 및 정적 파일
├── data/                    # 기본 EEG 데이터
└── README.md                # 프로젝트 설명 파일
```

---

## **기타 사항**
- 서버 실행 시 Python 3.8 이상을 권장합니다.  
- 이 시스템은 기본 EEG 데이터셋을 제공하며, 사용자가 추가 데이터를 업로드하여 분석할 수 있습니다.

---

**이제 프로젝트를 실행하고 EEG 데이터를 분석해보세요! 🚀**

---
